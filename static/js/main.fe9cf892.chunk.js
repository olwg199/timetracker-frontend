(this["webpackJsonptimetracker-frontend"]=this["webpackJsonptimetracker-frontend"]||[]).push([[0],{17:function(e,t,n){e.exports={logo:"Header_logo__3_SJs",btnSignin:"Header_btnSignin__1Rjae",btnSignup:"Header_btnSignup__tJqlS"}},41:function(e,t,n){e.exports={btn:"Button_btn__2T0J7"}},43:function(e,t,n){e.exports={addButton:"Goals_addButton__2lCex"}},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n(21),s=n.n(c),i=n(14),o=n(41),u=n.n(o);var l=function(e){var t=e.children,n=e.href,r=e.onClick,c=e.classList;return Object(a.jsx)(i.a,{className:"".concat(u.a.btn," ").concat(void 0!==c?c.join(" "):""),to:n,onClick:r,children:t})},d=n.p+"static/media/logo.45cba6bb.svg",j=n(3),p=n.n(j),b=n(5),f=n(2),v="REGISTER",O="LOGIN",h="REFRESH",m="LOGOUT",g="SET_GOALS",x="ADD_GOAL",y="CHANGE_GOAL",k="REMOVE_GOAL",w="SET_GOALS_LOADING",S=function(e){return{type:x,payload:e}},N=function(e){return{type:y,payload:e}},_=function(e){return{type:k,payload:e}},A=function(e){return{type:w,payload:e}},G=n(23),C=n(24),L=n(19),T=n.n(L),I="https://timetracker-api-node.herokuapp.com/",q=T.a.create({withCredentials:!0,baseURL:I});q.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),q.interceptors.response.use((function(e){return e}),function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,401!==t.response.status||t.config._isRetry){e.next=14;break}return n._isRetry=!0,e.prev=3,e.next=6,T.a.get("".concat(I,"user/refresh"),{withCredentials:!0});case 6:return a=e.sent,localStorage.setItem("token",a.data.accessToken),e.abrupt("return",q.request(n));case 11:e.prev=11,e.t0=e.catch(3),console.log("Interceptor response: ".concat(e.t0));case 14:throw t;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}());var V=q,E=new(function(){function e(){Object(G.a)(this,e)}return Object(C.a)(e,[{key:"login",value:function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.post("/user/login",{username:t,password:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(b.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.post("/user/signup",{username:t,password:n,email:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.post("/user/logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.a.get("".concat(I,"user/refresh"),{withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),R=n(8),B=n(17),M=n.n(B);var D=function(){var e=Object(R.b)(),t=Object(R.c)((function(e){return e.user})),n=t.user,c=t.isAuth;return Object(r.useEffect)((function(){localStorage.getItem("token")&&e(function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.refresh();case 3:n=e.sent,a=n.data,localStorage.setItem("token",a.accessToken),t((s=a,i=!0,{type:h,payload:Object(f.a)(Object(f.a)({},s),{},{isAuth:i})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(null===(r=e.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message);case 12:case"end":return e.stop()}var s,i}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e,c]),Object(a.jsxs)("header",{id:"header",children:[Object(a.jsx)("div",{className:M.a.logo,children:Object(a.jsx)(i.a,{to:"/",alt:"Home page",children:Object(a.jsx)("img",{src:d,alt:"Logo"})})}),c?Object(a.jsxs)("div",{className:M.a.loginArea,children:["Hello ".concat(n.username,"!"),Object(a.jsx)(l,{text:"Log Out",onClick:function(){e(function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.logout();case 3:localStorage.removeItem("token"),t({type:m,payload:{}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(null===(n=e.t0.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}})]}):Object(a.jsxs)("div",{className:M.a.loginArea,children:[Object(a.jsx)(l,{classList:[M.a.btnSignin],href:"/login",children:"Sign In"}),Object(a.jsx)(l,{classList:[M.a.btnSignup],href:"/register",children:"Sign Up"})]})]})},H=n(6),U=n(7);n(75);var F=function(e){var t=e.active,n=e.setActive,r=e.title,c=e.children;return Object(a.jsx)("div",{className:t?"modal active":"modal",onClick:function(){return n(!t)},children:Object(a.jsxs)("div",{className:"modal_content",onClick:function(e){return e.stopPropagation()},children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("div",{className:"modal-header_title",children:r}),Object(a.jsx)("div",{className:"modal-header_close-btn",id:"modal-header_close-btn",onClick:function(){return n(!t)},children:Object(a.jsx)("i",{className:"far fa-times-circle"})})]}),c]})})};n(76);var J=function(e){var t,n=e.value,r=e.setValue,c=e.type,s=e.name,i=e.rows,o=e.options;switch(c?c.toLowerCase():"input"){case"textarea":t=Object(a.jsx)("textarea",{placeholder:s,onChange:r||"",value:n,className:"input",rows:i||""});break;case"select":t=Object(a.jsx)("select",{onChange:r,className:"input",defaultValue:n,children:o.map((function(e){return Object(a.jsx)("option",{value:e,children:e},e)}))});break;default:t=Object(a.jsx)("input",{type:c,placeholder:s,onChange:r||"",value:n,className:"input"})}return Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("label",{htmlFor:n,children:s}),t]})},P=new(function(){function e(){Object(G.a)(this,e)}return Object(C.a)(e,[{key:"getGoals",value:function(){var e=Object(b.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.get("/goals"));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createGoal",value:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.post("/goals/",Object(f.a)({},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGoal",value:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.patch("/goals/".concat(t.id),Object(f.a)({},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGoal",value:function(){var e=Object(b.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V.delete("/goals/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),z=function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(A(!0)),t.next=4,P.deleteGoal(e);case 4:n(_(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(null===(a=t.t0.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message);case 10:return t.prev=10,n(A(!1)),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(e){return t.apply(this,arguments)}}()};n(77);var W=function(e){var t=e.currentGoal,n=e.setActive,c=e.type,s=Object(R.b)(),i=["daily","monthly","annual"],o=t||{title:"",time:0,frequency:i[0],description:"",isActive:!0},u=Object(r.useState)(o),d=Object(U.a)(u,2),j=d[0],v=d[1];return Object(a.jsxs)("div",{className:"add-goal",children:[Object(a.jsx)(J,{name:"Title",value:j.title,setValue:function(e){v(Object(f.a)(Object(f.a)({},j),{},{title:e.target.value}))}}),Object(a.jsx)(J,{name:"Time",value:j.time,setValue:function(e){v(Object(f.a)(Object(f.a)({},j),{},{time:e.target.value}))},type:"number"}),Object(a.jsx)(J,{name:"Frequency",value:j.frequency,setValue:function(e){v(Object(f.a)(Object(f.a)({},j),{},{frequency:e.target.value}))},type:"select",options:i}),Object(a.jsx)(J,{name:"Description",value:j.description,setValue:function(e){v(Object(f.a)(Object(f.a)({},j),{},{description:e.target.value}))},type:"textarea",rows:"5"}),Object(a.jsx)(l,{href:"#",onClick:function(e){e.preventDefault();var t=function(e){var t=!0,n=[];j.title||(t=!1,n.push("Field title is required!"));j.time<=0&&(t=!1,n.push("Time must be grater than 0."));j.frequency||(t=!1,n.push("You have to choose your frequency."));return{isValid:t,message:n.join(" ")}}();if(t.isValid){switch(c){case"update":s(function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(A(!0)),t.next=4,P.updateGoal(e);case 4:n(N(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(null===(a=t.t0.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message);case 10:return t.prev=10,n(A(!1)),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})));return function(e){return t.apply(this,arguments)}}()}(j));break;default:s(function(e){return function(){var t=Object(b.a)(p.a.mark((function t(n){var a,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(A(!0)),t.next=4,P.createGoal(e);case 4:a=t.sent,n(S(a.data.createdGoal)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),console.log(null===(r=t.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message);case 12:return t.prev=12,n(A(!1)),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,8,12,15]])})));return function(e){return t.apply(this,arguments)}}()}(j)),v(o)}n(!1)}else alert(t.message)},classList:["btn","add-goal-button"],children:"update"===c?"Update goal":"Add goal"})]})};n(78);var Y={getTimeBySeconds:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(a<10?"0"+a:a)},getSecondsFromMinutes:function(e){return 60*e}};var K=function(e){var t=Object(r.useRef)({}),n=Object(r.useState)({time:0,isStarted:!1}),c=Object(U.a)(n,2),s=c[0],i=c[1];return Object(a.jsxs)("div",{className:"stopwatch",children:[Object(a.jsx)("i",{className:"far fa-stopwatch"}),Y.getTimeBySeconds(s.time),s.isStarted?Object(a.jsx)("div",{className:"stopwatch_control",onClick:function(){i(Object(f.a)(Object(f.a)({},s),{},{isStarted:!1})),clearInterval(t.current)},children:Object(a.jsx)("i",{className:"fas fa-pause"})}):Object(a.jsx)("div",{className:"stopwatch_control",onClick:function(){i(Object(f.a)(Object(f.a)({},s),{},{isStarted:!0})),t.current=setInterval((function(){i({isStarted:!0,time:s.time+=1})}),1e3)},children:Object(a.jsx)("i",{className:"fas fa-play"})})]})};var Q=function(e){var t=e.goal,n=e.deleteGoal,c=e.updateSpentTime,s=Object(r.useState)(!1),i=Object(U.a)(s,2),o=i[0],u=i[1];return Object(a.jsxs)("div",{className:"goal-item",children:[Object(a.jsx)("div",{className:"goal-item_title",children:t.title}),Object(a.jsxs)("div",{className:"goal-item_time",children:[Object(a.jsx)("i",{className:"far fa-clock"}),Y.getTimeBySeconds(Y.getSecondsFromMinutes(t.time))]}),Object(a.jsx)(K,{saveTime:c}),Object(a.jsx)("div",{className:"goal-item_edit",onClick:function(){u(!0)},children:Object(a.jsx)("i",{className:"fas fa-pen-square"})}),Object(a.jsx)("div",{className:"goal-item_delete",onClick:n,children:Object(a.jsx)("i",{className:"fas fa-trash-alt"})}),Object(a.jsx)(F,{active:o,setActive:u,title:"Update goal",children:Object(a.jsx)(W,{currentGoal:t,setActive:u,type:"update"})})]})};n(79);var X=function(e){var t=e.title,n=e.children,c=Object(r.useState)(!1),s=Object(U.a)(c,2),i=s[0],o=s[1];return Object(a.jsxs)("div",{className:"accordion",children:[Object(a.jsxs)("div",{className:"accordion-header",onClick:function(){o(!i)},children:[Object(a.jsx)("div",{className:"accordion-header_title",children:t}),Object(a.jsx)("div",{className:"accordion-header_close-btn",children:Object(a.jsx)("i",{className:i?"fas fa-times":"fas fa-chevron-down"})})]}),Object(a.jsx)("div",{className:i?"accordion-content active":"accordion-content",children:n})]})},Z=(n(80),n(43)),$=n.n(Z);var ee=function(e){var t=Object(R.b)(),n=Object(r.useState)(!1),c=Object(U.a)(n,2),s=c[0],i=c[1],o=Object(R.c)((function(e){return e.goals})),u=o.isLoading,d=o.list,j=d.reduce((function(e,n){return"daily"===n.frequency&&e.daily.push(Object(a.jsx)(Q,{goal:n,deleteGoal:function(){t(z(n.id))}},n.id)),"monthly"===n.frequency&&e.monthly.push(Object(a.jsx)(Q,{goal:n,deleteGoal:function(){t(z(n.id))}},n.id)),"annual"===n.frequency&&e.annual.push(Object(a.jsx)(Q,{goal:n,deleteGoal:function(){t(z(n.id))}},n.id)),e}),{daily:[],monthly:[],annual:[]});return Object(r.useEffect)((function(){t(function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(A(!0)),e.next=4,P.getGoals();case 4:n=e.sent,a=n.data.goals.map((function(e){return e.goal})),t({type:g,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(null===(r=e.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message);case 12:return e.prev=12,t(A(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t){return e.apply(this,arguments)}}())}),[d.length,t]),Object(a.jsxs)("section",{className:"goal-list",children:[Object(a.jsx)(X,{title:"Daily goals",children:j.daily.length>0?j.daily:u?"Loading":"Sorry, no goals available"}),Object(a.jsx)(X,{title:"Monthly goals",children:j.monthly.length>0?j.monthly:"Sorry, no goals available"}),Object(a.jsx)(X,{title:"Annual goals",children:j.annual.length>0?j.annual:"Sorry, no goals available"}),Object(a.jsx)(l,{classList:[$.a.addButton],onClick:function(){return i(!s)},href:"#",children:Object(a.jsx)("i",{className:"fas fa-plus"})}),Object(a.jsx)(F,{active:s,setActive:i,title:"Add goal",children:Object(a.jsx)(W,{setActive:i})})]})};n(81);function te(){var e=Object(r.useState)(""),t=Object(U.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),i=Object(U.a)(s,2),o=i[0],u=i[1],d=Object(R.b)();return Object(R.c)((function(e){return e.user})).isAuth?Object(a.jsx)(H.b,{to:"/"}):Object(a.jsxs)("div",{id:"login-form",children:[Object(a.jsx)(J,{type:"text",name:"Username",setValue:function(e){c(e.target.value)},value:n}),Object(a.jsx)(J,{type:"password",name:"Password",setValue:function(e){u(e.target.value)},value:o}),Object(a.jsx)(l,{text:"Login",href:"#",onClick:function(){d(function(e,t){return function(){var n=Object(b.a)(p.a.mark((function n(a){var r,c,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.login(e,t);case 3:r=n.sent,localStorage.setItem("token",r.data.accessToken),a((i=r.data,o=!0,{type:O,payload:Object(f.a)(Object(f.a)({},i),{},{isAuth:o})})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(null===(c=n.t0.response)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.message);case 11:case"end":return n.stop()}var i,o}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(n,o)),u("")},classList:["btn","btn-login"]})]})}n(82);function ne(){var e=Object(r.useState)(""),t=Object(U.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),i=Object(U.a)(s,2),o=i[0],u=i[1],d=Object(r.useState)(""),j=Object(U.a)(d,2),O=j[0],h=j[1],m=Object(R.b)();return Object(R.c)((function(e){return e.user})).isAuth?Object(a.jsx)(H.b,{to:"/"}):Object(a.jsxs)("div",{id:"register-form",children:[Object(a.jsx)(J,{type:"text",name:"Username",setValue:function(e){c(e.target.value)},value:n}),Object(a.jsx)(J,{type:"password",name:"Password",setValue:function(e){u(e.target.value)},value:o}),Object(a.jsx)(J,{type:"email",name:"Email",setValue:function(e){h(e.target.value)},value:O}),Object(a.jsx)(l,{text:"Register",href:"#",onClick:function(){m(function(e,t,n){return function(){var a=Object(b.a)(p.a.mark((function a(r){var c,s,i;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E.register(e,t,n);case 3:c=a.sent,localStorage.setItem("token",c.data.accessToken),r((o=c.data,u=!0,{type:v,payload:Object(f.a)(Object(f.a)({},o),{},{isAuth:u})})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(null===(s=a.t0.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.message);case 11:case"end":return a.stop()}var o,u}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(n,o,O)),u("")},classList:["btn","btn-register"]})]})}var ae=function(e){return Object(a.jsx)("section",{id:"main-area",children:Object(a.jsxs)(H.e,{children:[Object(a.jsx)(H.c,{exact:!0,path:["/","/timetracker-frontend"],children:Object(a.jsx)(ee,{})}),Object(a.jsx)(H.c,{path:["/login","/timetracker-frontend/login"],children:Object(a.jsx)(te,{})}),Object(a.jsx)(H.c,{path:["/register","/timetracker-frontend/register"],children:Object(a.jsx)(ne,{})})]})})},re=n(15),ce=n(31),se={isLoading:!1,list:[]};var ie={user:{},accessToken:"",refreshToken:"",isAuth:!1};var oe=Object(re.combineReducers)({goals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case g:return Object(f.a)(Object(f.a)({},e),{},{list:Object(ce.a)(a)});case x:return Object(f.a)(Object(f.a)({},e),{},{list:[].concat(Object(ce.a)(e.list),[Object(f.a)({},a)])});case y:var r=e.list.map((function(e){return e.id!==a.id?e:Object(f.a)({},a)}));return Object(f.a)(Object(f.a)({},e),{},{list:r});case k:var c=e.list.filter((function(e){return e.id!==a}));return Object(f.a)(Object(f.a)({},e),{},{list:c});case w:return Object(f.a)(Object(f.a)({},e),{},{isLoading:a});default:return se}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case h:case O:case v:return Object(f.a)({},a);case m:return Object(f.a)({},ie);default:return Object(f.a)({},e)}}}),ue=n(44),le=n(45),de=Object(re.createStore)(oe,Object(le.composeWithDevTools)(Object(re.applyMiddleware)(ue.a)));var je=function(){return Object(a.jsx)(R.a,{store:de,children:Object(a.jsx)(H.a,{children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(D,{}),Object(a.jsx)(ae,{})]})})})};s.a.render(Object(a.jsx)(je,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.fe9cf892.chunk.js.map