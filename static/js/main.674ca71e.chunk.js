(this["webpackJsonptimetracker-frontend"]=this["webpackJsonptimetracker-frontend"]||[]).push([[0],{68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),c=a(19),s=a.n(c),o=a(7);var i=function(e){var t=e.text,a=e.href,r=e.onClick,c=e.classList;return Object(n.jsx)("a",{className:void 0!==c?c.join(" "):"",href:a,onClick:r,children:t})},u=a.p+"static/media/logo.38c8747e.svg",l=a(2),d=a.n(l),j=a(5),f=a(3),b="REGISTER",p="LOGIN",v="REFRESH",h="LOGOUT",O="SET_GOALS",m="CREATE_GOAL",x="UPDATE_GOAL",g="DELETE_GOAL",y=a(21),k=a(22),w=a(17),N=a.n(w),S="https://timetracker-api-node.herokuapp.com/",A=N.a.create({withCredentials:!0,baseURL:S});A.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(localStorage.getItem("token")),e})),A.interceptors.response.use((function(e){return e}),function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,401!==t.response.status||t.config._isRetry){e.next=14;break}return a._isRetry=!0,e.prev=3,e.next=6,N.a.get("".concat(S,"user/refresh"),{withCredentials:!0});case 6:return n=e.sent,localStorage.setItem("token",n.data.accessToken),e.abrupt("return",A.request(a));case 11:e.prev=11,e.t0=e.catch(3),console.log("Interceptor response: ".concat(e.t0));case 14:throw t;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}());var C=A,G=new(function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,[{key:"login",value:function(){var e=Object(j.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.post("/user/login",{username:t,password:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(j.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.post("/user/signup",{username:t,password:a,email:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.post("/user/logout"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.a.get("".concat(S,"user/refresh"),{withCredentials:!0}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),T=a(8);a(68);var L=function(){var e=Object(T.b)(),t=Object(T.c)((function(e){return e.user})),a=t.user,c=t.isAuth;return Object(r.useEffect)((function(){localStorage.getItem("token")&&e(function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.refresh();case 3:a=e.sent,n=a.data,localStorage.setItem("token",n.accessToken),t((s=n,o=!0,{type:v,payload:Object(f.a)(Object(f.a)({},s),{},{isAuth:o})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(null===(r=e.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message);case 12:case"end":return e.stop()}var s,o}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e,c]),Object(n.jsxs)("header",{id:"header",children:[Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)("a",{href:"/",alt:"Home page",children:Object(n.jsx)("img",{src:u,alt:"Logo"})})}),c?Object(n.jsxs)("div",{className:"login-area",children:["Hello ".concat(a.username,"!"),Object(n.jsx)(i,{classList:["btn"],text:"Log Out",onClick:function(){e(function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.logout();case 3:localStorage.removeItem("token"),t({type:h,payload:{}}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(null===(a=e.t0.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}})]}):Object(n.jsxs)("div",{className:"login-area",children:[Object(n.jsx)(i,{classList:["btn","btn-signin"],text:"Sign In",href:"/login"}),Object(n.jsx)(i,{classList:["btn","btn-signup"],text:"Sign Up",href:"/register"})]})]})},_=a(6);a(69);var E={getTimeBySeconds:function(e){var t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(t<10?"0"+t:t)+":"+(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)},getSecondsFromMinutes:function(e){return 60*e}};var I=function(e){var t=Object(r.useRef)({}),a=Object(r.useState)({time:0,isStarted:!1}),c=Object(o.a)(a,2),s=c[0],i=c[1];return Object(n.jsxs)("div",{className:"stopwatch",children:[Object(n.jsx)("i",{className:"far fa-stopwatch"}),E.getTimeBySeconds(s.time),s.isStarted?Object(n.jsx)("div",{className:"stopwatch_control",onClick:function(){i(Object(f.a)(Object(f.a)({},s),{},{isStarted:!1})),clearInterval(t.current)},children:Object(n.jsx)("i",{className:"fas fa-pause"})}):Object(n.jsx)("div",{className:"stopwatch_control",onClick:function(){i(Object(f.a)(Object(f.a)({},s),{},{isStarted:!0})),t.current=setInterval((function(){i({isStarted:!0,time:s.time+=1})}),1e3)},children:Object(n.jsx)("i",{className:"fas fa-play"})})]})};a(70);var q=function(e){var t,a=e.value,r=e.setValue,c=e.type,s=e.name,o=e.rows,i=e.options;switch(c?c.toLowerCase():"input"){case"textarea":t=Object(n.jsx)("textarea",{placeholder:s,onChange:r||"",value:a,className:"input",rows:o||""});break;case"select":t=Object(n.jsx)("select",{onChange:r,className:"input",defaultValue:a,children:i.map((function(e){return Object(n.jsx)("option",{value:e,children:e},e)}))});break;default:t=Object(n.jsx)("input",{type:c,placeholder:s,onChange:r||"",value:a,className:"input"})}return Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("label",{htmlFor:a,children:s}),t]})},V=new(function(){function e(){Object(y.a)(this,e)}return Object(k.a)(e,[{key:"getGoals",value:function(){var e=Object(j.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.get("/goals"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"createGoal",value:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.post("/goals/",Object(f.a)({},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGoal",value:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.patch("/goals/".concat(t.id),Object(f.a)({},t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGoal",value:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.delete("/goals/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),R=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getGoals();case 3:a=e.sent,t((c=a.data.goals,{type:O,payload:c})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(null===(n=e.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message);case 10:case"end":return e.stop()}var c}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.deleteGoal(e);case 3:a(R()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(null===(n=t.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()};a(71);var M=function(e){var t=e.currentGoal,a=e.setActive,c=e.type,s=Object(T.b)(),u=["daily","monthly","annual"],l=t||{title:"",time:0,frequency:u[0],description:"",isActive:!0},b=Object(r.useState)(l),p=Object(o.a)(b,2),v=p[0],h=p[1];return Object(n.jsxs)("div",{className:"add-goal",children:[Object(n.jsx)(q,{name:"Title",value:v.title,setValue:function(e){h(Object(f.a)(Object(f.a)({},v),{},{title:e.target.value}))}}),Object(n.jsx)(q,{name:"Time",value:v.time,setValue:function(e){h(Object(f.a)(Object(f.a)({},v),{},{time:e.target.value}))},type:"number"}),Object(n.jsx)(q,{name:"Frequency",value:v.frequency,setValue:function(e){h(Object(f.a)(Object(f.a)({},v),{},{frequency:e.target.value}))},type:"select",options:u}),Object(n.jsx)(q,{name:"Description",value:v.description,setValue:function(e){h(Object(f.a)(Object(f.a)({},v),{},{description:e.target.value}))},type:"textarea",rows:"5"}),Object(n.jsx)(i,{text:"update"===c?"Update goal":"Add goal",href:"#",onClick:function(e){e.preventDefault();var t=function(e){var t=!0,a=[];v.title||(t=!1,a.push("Field title is required!"));v.time<=0&&(t=!1,a.push("Time must be grater than 0."));v.frequency||(t=!1,a.push("You have to choose your frequency."));return{isValid:t,message:a.join(" ")}}();if(t.isValid){switch(c){case"update":s(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.updateGoal(e);case 3:a(R()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(null===(n=t.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(v));break;default:s(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.createGoal(e);case 3:a(R()),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(null===(n=t.t0.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(v)),h(l)}a(!1)}else alert(t.message)},classList:["btn","add-goal-button"]})]})};a(72);var D=function(e){var t=e.active,a=e.setActive,r=e.title,c=e.children;return Object(n.jsx)("div",{className:t?"modal active":"modal",onClick:function(){return a(!t)},children:Object(n.jsxs)("div",{className:"modal_content",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("div",{className:"modal-header_title",children:r}),Object(n.jsx)("div",{className:"modal-header_close-btn",id:"modal-header_close-btn",onClick:function(){return a(!t)},children:Object(n.jsx)("i",{className:"far fa-times-circle"})})]}),c]})})};var F=function(e){var t=e.goal,a=e.deleteGoal,c=e.updateSpentTime,s=Object(r.useState)(!1),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(n.jsxs)("div",{className:"goal-item",children:[Object(n.jsx)("div",{className:"goal-item_title",children:t.title}),Object(n.jsxs)("div",{className:"goal-item_time",children:[Object(n.jsx)("i",{className:"far fa-clock"}),E.getTimeBySeconds(E.getSecondsFromMinutes(t.time))]}),Object(n.jsx)(I,{saveTime:c}),Object(n.jsx)("div",{className:"goal-item_edit",onClick:function(){l(!0)},children:Object(n.jsx)("i",{className:"fas fa-pen-square"})}),Object(n.jsx)("div",{className:"goal-item_delete",onClick:a,children:Object(n.jsx)("i",{className:"fas fa-trash-alt"})}),Object(n.jsx)(D,{active:u,setActive:l,title:"Update goal",children:Object(n.jsx)(M,{currentGoal:t,setActive:l,type:"update"})})]})};a(73);var B=function(e){var t=e.title,a=e.children,c=Object(r.useState)(!1),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(n.jsxs)("div",{className:"accordion",children:[Object(n.jsxs)("div",{className:"accordion-header",onClick:function(){u(!i)},children:[Object(n.jsx)("div",{className:"accordion-header_title",children:t}),Object(n.jsx)("div",{className:"accordion-header_close-btn",children:Object(n.jsx)("i",{className:i?"fas fa-times":"fas fa-chevron-down"})})]}),Object(n.jsx)("div",{className:i?"accordion-content active":"accordion-content",children:a})]})};a(74);var P=function(e){var t=Object(T.b)(),a=Object(T.c)((function(e){return e.goals})).reduce((function(e,a){return"daily"===a.frequency&&e.daily.push(Object(n.jsx)(F,{goal:a,deleteGoal:function(){t(U(a.id))}},a.id)),"monthly"===a.frequency&&e.monthly.push(Object(n.jsx)(F,{goal:a,deleteGoal:function(){t(U(a.id))}},a.id)),"annual"===a.frequency&&e.annual.push(Object(n.jsx)(F,{goal:a,deleteGoal:function(){t(U(a.id))}},a.id)),e}),{daily:[],monthly:[],annual:[]});return Object(r.useEffect)((function(){t(R())}),[a.daily.length,a.monthly.length,a.annual.length,t]),Object(n.jsxs)("section",{className:"goal-list",children:[Object(n.jsx)(B,{title:"Daily goals",children:a.daily.length>0?a.daily:"Sorry, no goals available"}),Object(n.jsx)(B,{title:"Monthly goals",children:a.monthly.length>0?a.monthly:"Sorry, no goals available"}),Object(n.jsx)(B,{title:"Annual goals",children:a.annual.length>0?a.annual:"Sorry, no goals available"})]})};a(75);function H(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(""),u=Object(o.a)(s,2),l=u[0],b=u[1],v=Object(T.b)();return Object(T.c)((function(e){return e.user})).isAuth?Object(n.jsx)(_.a,{to:"/"}):Object(n.jsxs)("div",{id:"login-form",children:[Object(n.jsx)(q,{type:"text",name:"Username",setValue:function(e){c(e.target.value)},value:a}),Object(n.jsx)(q,{type:"password",name:"Password",setValue:function(e){b(e.target.value)},value:l}),Object(n.jsx)(i,{text:"Login",href:"#",onClick:function(){v(function(e,t){return function(){var a=Object(j.a)(d.a.mark((function a(n){var r,c,s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,G.login(e,t);case 3:r=a.sent,localStorage.setItem("token",r.data.accessToken),n((o=r.data,i=!0,{type:p,payload:Object(f.a)(Object(f.a)({},o),{},{isAuth:i})})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(null===(c=a.t0.response)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.message);case 11:case"end":return a.stop()}var o,i}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}(a,l)),b("")},classList:["btn","btn-login"]})]})}a(77);function J(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(""),u=Object(o.a)(s,2),l=u[0],p=u[1],v=Object(r.useState)(""),h=Object(o.a)(v,2),O=h[0],m=h[1],x=Object(T.b)();return Object(T.c)((function(e){return e.user})).isAuth?Object(n.jsx)(_.a,{to:"/"}):Object(n.jsxs)("div",{id:"register-form",children:[Object(n.jsx)(q,{type:"text",name:"Username",setValue:function(e){c(e.target.value)},value:a}),Object(n.jsx)(q,{type:"password",name:"Password",setValue:function(e){p(e.target.value)},value:l}),Object(n.jsx)(q,{type:"email",name:"Email",setValue:function(e){m(e.target.value)},value:O}),Object(n.jsx)(i,{text:"Register",href:"#",onClick:function(){x(function(e,t,a){return function(){var n=Object(j.a)(d.a.mark((function n(r){var c,s,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,G.register(e,t,a);case 3:c=n.sent,localStorage.setItem("token",c.data.accessToken),r((i=c.data,u=!0,{type:b,payload:Object(f.a)(Object(f.a)({},i),{},{isAuth:u})})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(null===(s=n.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message);case 11:case"end":return n.stop()}var i,u}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(a,l,O)),p("")},classList:["btn","btn-register"]})]})}var z=function(e){return Object(n.jsx)("section",{id:"main-area",children:Object(n.jsxs)(_.d,{children:[Object(n.jsx)(_.b,{exact:!0,path:"timetracker-frontend/",children:Object(n.jsx)(P,{})}),Object(n.jsx)(_.b,{path:"timetracker-frontend/login",children:Object(n.jsx)(H,{})}),Object(n.jsx)(_.b,{path:"timetracker-frontend/register",children:Object(n.jsx)(J,{})})]})})},W=a(14),Y=[];var K={user:{},accessToken:"",refreshToken:"",isAuth:!1};var Q=Object(W.combineReducers)({goals:function(){var e=arguments.length>1?arguments[1]:void 0,t=e.type,a=e.payload;switch(t){case O:case m:case x:case g:return a;default:return Y}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case v:case p:case b:return Object(f.a)({},n);case h:return Object(f.a)({},K);default:return Object(f.a)({},e)}}}),X=a(16);a(78);var Z=function(e){var t=e.active,a=e.setActive;return Object(n.jsx)("button",{type:"button",className:"btn add-button",onClick:function(){return a(!t)},children:Object(n.jsx)("i",{className:"fas fa-plus"})})},$=a(38),ee=a(39),te=Object(W.createStore)(Q,Object(ee.composeWithDevTools)(Object(W.applyMiddleware)($.a)));var ae=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.jsx)(T.a,{store:te,children:Object(n.jsx)(X.a,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(L,{}),Object(n.jsx)(z,{}),Object(n.jsx)(D,{active:a,setActive:c,title:"Add goal",children:Object(n.jsx)(M,{setActive:c})}),Object(n.jsx)(Z,{active:a,setActive:c})]})})})};s.a.render(Object(n.jsx)(ae,{}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.674ca71e.chunk.js.map